
    create table pro_commerce.tb_category (
        id bigint generated by default as identity,
        name varchar(255),
        primary key (id)
    );

    create table pro_commerce.tb_order (
        status smallint check (status between 0 and 4),
        client_id bigint,
        id bigint generated by default as identity,
        moment TIMESTAMP WITHOUT TIME ZONE,
        primary key (id)
    );

    create table pro_commerce.tb_order_item (
        price float(53),
        quantity integer,
        order_id bigint not null,
        product_id bigint not null,
        primary key (order_id, product_id)
    );

    create table pro_commerce.tb_payment (
        moment TIMESTAMP WITHOUT TIME ZONE,
        order_id bigint not null,
        primary key (order_id)
    );

    create table pro_commerce.tb_product (
        price float(53),
        id bigint generated by default as identity,
        description TEXT,
        img_url varchar(255),
        name varchar(255),
        primary key (id)
    );

    create table pro_commerce.tb_product_category (
        category_id bigint not null,
        product_id bigint not null,
        primary key (category_id, product_id)
    );

    create table pro_commerce.tb_role (
        id bigint generated by default as identity,
        authority varchar(255),
        primary key (id)
    );

    create table pro_commerce.tb_user (
        birth_date date,
        id bigint generated by default as identity,
        email varchar(255) unique,
        name varchar(255),
        password varchar(255),
        phone varchar(255),
        primary key (id)
    );

    create table pro_commerce.tb_user_role (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    );

    alter table if exists pro_commerce.tb_order 
       add constraint FKi0x0rv7d65vsceuy33km9567n 
       foreign key (client_id) 
       references pro_commerce.tb_user;

    alter table if exists pro_commerce.tb_order_item 
       add constraint FK4h5xid5qehset7qwe5l9c997x 
       foreign key (product_id) 
       references pro_commerce.tb_product;

    alter table if exists pro_commerce.tb_order_item 
       add constraint FKgeobgl2xu916he8vhljktwxnx 
       foreign key (order_id) 
       references pro_commerce.tb_order;

    alter table if exists pro_commerce.tb_payment 
       add constraint FKokaf4il2cwit4h780c25dv04r 
       foreign key (order_id) 
       references pro_commerce.tb_order;

    alter table if exists pro_commerce.tb_product_category 
       add constraint FK5r4sbavb4nkd9xpl0f095qs2a 
       foreign key (category_id) 
       references pro_commerce.tb_category;

    alter table if exists pro_commerce.tb_product_category 
       add constraint FKgbof0jclmaf8wn2alsoexxq3u 
       foreign key (product_id) 
       references pro_commerce.tb_product;

    alter table if exists pro_commerce.tb_user_role 
       add constraint FKea2ootw6b6bb0xt3ptl28bymv 
       foreign key (role_id) 
       references pro_commerce.tb_role;

    alter table if exists pro_commerce.tb_user_role 
       add constraint FK7vn3h53d0tqdimm8cp45gc0kl 
       foreign key (user_id) 
       references pro_commerce.tb_user;
